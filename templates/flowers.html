{% extends "base.html" %}

{% block lab %}Лабораторная работа 2{% endblock %}

{% block main %}
    <h2>Список всех цветов ({{ flowers|length }})</h2>

    {% if flowers %}
        <table border="1" cellpadding="6" cellspacing="0">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Название</th>
                    <th>Цена (руб.)</th>
                    <th>Действие</th>
                </tr>
            </thead>
            <tbody>
                {% for f in flowers %}
                <tr>
                    <td>{{ loop.index0 }}</td>
                    <td>{{ f.name }}</td>
                    <td>{{ f.price }}</td>
                    <td>
                        <a href="{{ url_for('flowers', flower_id=loop.index0) }}">Просмотреть</a>
                        |
                        <a href="{{ url_for('delete_flower', flower_id=loop.index0) }}"
                           onclick="return confirm('Удалить цветок {{ f.name }}?');">
                           Удалить
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <p>
            <a href="{{ url_for('clear_flowers') }}"
               onclick="return confirm('Вы уверены, что хотите удалить все цветы?');">
               Очистить список
            </a>
        </p>

    {% else %}
        <p>Список пуст.</p>
    {% endif %}

    <hr>

    <h3>Добавить новый цветок</h3>

    <form action="{{ url_for('add_flower') }}" method="post">
        <label>
            Название:
            <input type="text" name="name" required>
        </label>
        <label style="margin-left:10px;">
            Цена (руб.):
            <input type="number" name="price" min="0" required>
        </label>
        <button type="submit">Добавить</button>
    </form>

{% endblock %}
